// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.13.0
// source: queries.sql

package queries

import (
	"context"
	"database/sql"
	"time"
)

const clearOrganizationInway = `-- name: ClearOrganizationInway :execrows
UPDATE directory.organizations
    SET inway_id = null
WHERE serial_number = $1
`

func (q *Queries) ClearOrganizationInway(ctx context.Context, serialNumber string) (int64, error) {
	result, err := q.exec(ctx, q.clearOrganizationInwayStmt, clearOrganizationInway, serialNumber)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected()
}

const getInway = `-- name: GetInway :one
select
    inways.name as name,
    address,
    version as nlx_version,
    inways.created_at as created_at,
    updated_at,
    organizations.serial_number as organization_serial_number,
    organizations.name as organization_name
from
    directory.inways
        join directory.organizations
            on directory.inways.organization_id = directory.organizations.id
where
    organizations.serial_number = $1
  and
    inways.name = $2
`

type GetInwayParams struct {
	SerialNumber string
	Name         string
}

type GetInwayRow struct {
	Name                     string
	Address                  string
	NlxVersion               string
	CreatedAt                time.Time
	UpdatedAt                time.Time
	OrganizationSerialNumber string
	OrganizationName         string
}

func (q *Queries) GetInway(ctx context.Context, arg *GetInwayParams) (*GetInwayRow, error) {
	row := q.queryRow(ctx, q.getInwayStmt, getInway, arg.SerialNumber, arg.Name)
	var i GetInwayRow
	err := row.Scan(
		&i.Name,
		&i.Address,
		&i.NlxVersion,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.OrganizationSerialNumber,
		&i.OrganizationName,
	)
	return &i, err
}

const getService = `-- name: GetService :one
select
    services.id as id,
    services.name as name,
    documentation_url,
    api_specification_type,
    internal,
    tech_support_contact,
    public_support_contact,
    organizations.serial_number as organization_serial_number,
    organizations.name as organization_name,
    one_time_costs,
    monthly_costs,
    request_costs
from directory.services
         join directory.organizations
              on services.organization_id = organizations.id
where
        services.id = $1
`

type GetServiceRow struct {
	ID                       int32
	Name                     string
	DocumentationUrl         sql.NullString
	ApiSpecificationType     sql.NullString
	Internal                 bool
	TechSupportContact       sql.NullString
	PublicSupportContact     sql.NullString
	OrganizationSerialNumber string
	OrganizationName         string
	OneTimeCosts             int32
	MonthlyCosts             int32
	RequestCosts             int32
}

func (q *Queries) GetService(ctx context.Context, id int32) (*GetServiceRow, error) {
	row := q.queryRow(ctx, q.getServiceStmt, getService, id)
	var i GetServiceRow
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.DocumentationUrl,
		&i.ApiSpecificationType,
		&i.Internal,
		&i.TechSupportContact,
		&i.PublicSupportContact,
		&i.OrganizationSerialNumber,
		&i.OrganizationName,
		&i.OneTimeCosts,
		&i.MonthlyCosts,
		&i.RequestCosts,
	)
	return &i, err
}

const selectInwayByAddress = `-- name: SelectInwayByAddress :one
select
    i.id as inway_id,
    i.organization_id
from
    directory.inways as i
         inner join directory.organizations o
             on o.id = i.organization_id
where
    i.address = $1
  and
    o.serial_number = $2
`

type SelectInwayByAddressParams struct {
	Address      string
	SerialNumber string
}

type SelectInwayByAddressRow struct {
	InwayID        int32
	OrganizationID int32
}

func (q *Queries) SelectInwayByAddress(ctx context.Context, arg *SelectInwayByAddressParams) (*SelectInwayByAddressRow, error) {
	row := q.queryRow(ctx, q.selectInwayByAddressStmt, selectInwayByAddress, arg.Address, arg.SerialNumber)
	var i SelectInwayByAddressRow
	err := row.Scan(&i.InwayID, &i.OrganizationID)
	return &i, err
}

const setOrganizationEmail = `-- name: SetOrganizationEmail :exec
insert into
    directory.organizations
    (serial_number, name, email_address)
values
    ($1, $2, $3)
    on conflict
on constraint organizations_uq_serial_number
    do update set
        serial_number = excluded.serial_number,
        name 		  = excluded.name,
        email_address = excluded.email_address
    returning id
`

type SetOrganizationEmailParams struct {
	SerialNumber string
	Name         string
	EmailAddress sql.NullString
}

func (q *Queries) SetOrganizationEmail(ctx context.Context, arg *SetOrganizationEmailParams) error {
	_, err := q.exec(ctx, q.setOrganizationEmailStmt, setOrganizationEmail, arg.SerialNumber, arg.Name, arg.EmailAddress)
	return err
}

const setOrganizationInway = `-- name: SetOrganizationInway :exec
update
    directory.organizations
set
    inway_id = $1
where
    serial_number = $2
`

type SetOrganizationInwayParams struct {
	InwayID      sql.NullInt32
	SerialNumber string
}

func (q *Queries) SetOrganizationInway(ctx context.Context, arg *SetOrganizationInwayParams) error {
	_, err := q.exec(ctx, q.setOrganizationInwayStmt, setOrganizationInway, arg.InwayID, arg.SerialNumber)
	return err
}
