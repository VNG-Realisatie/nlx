**/*.go !**/*_test.go {
    daemon +sigterm: "# directory-inspection-api
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        directory-inspection-api/cmd/nlx-directory-inspection-api/*.go \
        --listen-address-plain=localhost:6010 \
        --listen-address=localhost:6011 \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/directory?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-directory-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-directory-key=testing/pki/org-nlx-test-key.pem \
        --demo-env=test \
        --demo-domain=compose
    "

    daemon +sigterm: "# directory-registration-api
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        directory-registration-api/cmd/nlx-directory-registration-api/*.go \
        --listen-address=localhost:6012 \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/directory?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-directory-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-directory-key=testing/pki/org-nlx-test-key.pem
    "

    daemon +sigterm: "# directory-monitor
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        directory-monitor/cmd/nlx-directory-monitor/*.go \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/directory?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-monitor-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-monitor-key=testing/pki/org-nlx-test-key.pem \
        --ttl-offline-service=30
    "

    daemon +sigterm: "# config-api
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        config-api/cmd/nlx-config-api/*.go \
        --listen-address=localhost:6013 \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-org-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-org-key=testing/pki/org-nlx-test-key.pem \
        --directory-registration-address=localhost:6012 \
        --etcd-connection-string=http://localhost:2379
    "

    daemon +sigterm: "# outway
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        outway/cmd/nlx-outway/*.go \
        --listen-address=localhost:6014 \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/txlog?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-org-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-org-key=testing/pki/org-nlx-test-key.pem \
        --directory-inspection-address=localhost:6011
    "

    daemon +sigterm: "# inway 1
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        inway/cmd/nlx-inway/*.go \
        --listen-address=localhost:6015 \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/txlog?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-org-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-org-key=testing/pki/org-nlx-test-key.pem \
        --self-address=localhost:6015 \
        --directory-registration-address=localhost:6012 \
        --service-config=inway/service-config.toml
    "

    daemon +sigterm: "# inway 2
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        inway/cmd/nlx-inway/*.go \
        --listen-address=localhost:6016 \
        --postgres-dsn='postgresql://postgres:postgres\@localhost/txlog?sslmode=disable' \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-org-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-org-key=testing/pki/org-nlx-test-key.pem \
        --self-address=localhost:6016 \
        --directory-registration-address=localhost:6012 \
        --name=inway2 \
        --config-api-address=localhost:6013
    "

    daemon +sigterm: "# management-api
    go run \
        -ldflags='-X go.nlx.io/nlx/common/version.BuildSourceHash=dev -X go.nlx.io/nlx/common/version.BuildVersion=dev' \
        management-api/cmd/nlx-management-api/*.go \
        --listen-address=localhost:6017 \
        --tls-nlx-root-cert=testing/pki/ca-root.pem \
        --tls-org-cert=testing/pki/org-nlx-test-chain.pem \
        --tls-org-key=testing/pki/org-nlx-test-key.pem \
        --config-api-address=localhost:6013 \
        --secret-key=somethingverysecret \
        --csv-filename=management-api/accounts.csv
    "
}

{
    indir: docs/website
    daemon +sigterm: "# docs
    npm run start
    "
}

{
    indir: directory-ui
    daemon +sigterm: "# directory-ui
    BROWSER=none PROXY=http://localhost:6010 PORT=3001 npm run start
    "
}

{
    indir: management-ui
    daemon +sigterm: "# management-ui
    BROWSER=none PROXY=http://localhost:6017 PORT=3002 npm run start
    "
}

{
    indir: insight-ui
    daemon +sigterm: "# insight-ui
    BROWSER=none PROXY=http://localhost:6010 PORT=3003 npm run start
    "
}
