apiVersion: skaffold/v1beta16
kind: Config
build:
  cluster:
    namespace: kaniko
    concurrency: 6
    dockerConfig:
      secretName: docker-config-gitlab
      path: ~/.docker/config.json
  artifacts:
  - image: nlxio/auth-service
    kaniko:
      dockerfile: auth-service/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/ca-certportal
    kaniko:
      dockerfile: ca-certportal/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/ca-cfssl-unsafe
    context: ca-cfssl-unsafe
    kaniko:
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/config-api
    kaniko:
      dockerfile: config-api/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/docs
    context: docs
    kaniko:
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/directory-db
    kaniko:
      dockerfile: directory-db/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/directory-inspection-api
    kaniko:
      dockerfile: directory-inspection-api/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/directory-registration-api
    kaniko:
      dockerfile: directory-registration-api/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/directory-monitor
    kaniko:
      dockerfile: directory-monitor/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/directory-ui
    kaniko:
      dockerfile: directory-ui/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/insight-api
    kaniko:
      dockerfile: insight-api/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/insight-ui
    kaniko:
      dockerfile: insight-ui/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/inway
    kaniko:
      dockerfile: inway/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/irma
    kaniko:
      dockerfile: irma/Dockerfile
      buildArgs:
        IRMA_VERSION: 0.4.1
        IRMA_CHECKSUM: 34c735c289e4f37d7e5fe1893578f7cdef606ed4f292245672f96516d4f513fb
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/management-api
    kaniko:
      dockerfile: management-api/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/management-ui
    kaniko:
      dockerfile: management-ui/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/nlxctl
    kaniko:
      dockerfile: nlxctl/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/outway
    kaniko:
      dockerfile: outway/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/review-page
    context: review-page
    kaniko:
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
  - image: nlxio/txlog-db
    kaniko:
      dockerfile: txlog-db/Dockerfile
      buildArgs:
        GIT_COMMIT_HASH: "{{.CI_COMMIT_SHORT_SHA}}"
        GIT_TAG_NAME: "{{.CI_COMMIT_TAG}}"
      cache:
        hostPath: /tmp/kaniko-cache
profiles:
- name: minikube
  build:
    tagPolicy:
      sha256: {}
  deploy:
    helm:
      releases:
      - name: nlx-dev-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-dev.yaml
        values:
          caCertportalImage: nlxio/ca-certportal
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
          reviewPageImage: nlxio/review-page
        namespace: nlx-dev-directory
      - name: nlx-dev-brp
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-dev-brp.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-dev-brp
      - name: nlx-dev-rdw
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-dev-rdw.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-dev-rdw
      - name: nlx-dev-haarlem
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-dev-haarlem.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          outwayImage: nlxio/outway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-dev-haarlem
- name: review-directory
  build:
    tagPolicy:
      envTemplate:
        template: "{{.IMAGE_NAME}}:{{.CI_COMMIT_SHORT_SHA}}"
  deploy:
    helm:
      releases:
      - name: "nlx-directory-{{.CI_ENVIRONMENT_SLUG}}"
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-review.yaml
        setValueTemplates:
          caCertportalImage: nlxio/ca-certportal
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
          reviewPageImage: nlxio/review-page
          caAddress: ca-cfssl-unsafe.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          disableLoadBalancers: true
          insightDirectoryInspectionAPIURL: http://directory-inspection-api-internal.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          externalDomain: nlx-directory-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          domain: nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          reviewPage.environmentSlugWithDomain: "{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}"
- name: review-brp
  build:
    tagPolicy:
      envTemplate:
        template: "{{.IMAGE_NAME}}:{{.CI_COMMIT_SHORT_SHA}}"
  deploy:
    helm:
      releases:
      - name: "nlx-brp-{{.CI_ENVIRONMENT_SLUG}}"
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-review-brp.yaml
        setValueTemplates:
          authServiceImage: "nlxio/auth-service:{{.CI_COMMIT_SHORT_SHA}}"
          caCfsslUnsafeImage: "nlxio/ca-cfssl-unsafe:{{.CI_COMMIT_SHORT_SHA}}"
          configAPIImage: "nlxio/config-api:{{.CI_COMMIT_SHORT_SHA}}"
          insightAPIImage: "nlxio/insight-api:{{.CI_COMMIT_SHORT_SHA}}"
          inwayImage: "nlxio/inway:{{.CI_COMMIT_SHORT_SHA}}"
          managementAPIImage: "nlxio/management-api:{{.CI_COMMIT_SHORT_SHA}}"
          managementUIImage: "nlxio/management-ui:{{.CI_COMMIT_SHORT_SHA}}"
          nlxctlImage:  "nlxio/nlxctl:{{.CI_COMMIT_SHORT_SHA}}"
          txlogDBImage: "nlxio/txlog-db:{{.CI_COMMIT_SHORT_SHA}}"
          directoryRegistrationHostname: directory-registration-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          directoryInspectionHostname: directory-inspection-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          caAddress: ca-cfssl-unsafe.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          externalDomain: nlx-brp-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          domain: nlx-brp-{{.CI_ENVIRONMENT_SLUG}}
          irma.apiServerImage: "nlxio/irma:{{.CI_COMMIT_SHORT_SHA}}"
          inway.config: |
            [services]
                [services.basisregistratie]
                endpoint-url = 'https://service:8443'
                authorization-model = 'none'
                api-specification-document-url = 'https://service:8443/openapi.json'
                insight-api-url = 'https://insight-api-nlx-brp-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}'
                irma-api-url = 'https://irma-api-nlx-brp-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}'
                ca-cert-path = '/ca-certs/basisregistratie.pem'
- name: review-rdw
  build:
    tagPolicy:
      envTemplate:
        template: "{{.IMAGE_NAME}}:{{.CI_COMMIT_SHORT_SHA}}"
  deploy:
    helm:
      releases:
      - name: "nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}"
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-review-rdw.yaml
        setValueTemplates:
          authServiceImage: "nlxio/auth-service:{{.CI_COMMIT_SHORT_SHA}}"
          caCfsslUnsafeImage: "nlxio/ca-cfssl-unsafe:{{.CI_COMMIT_SHORT_SHA}}"
          configAPIImage: "nlxio/config-api:{{.CI_COMMIT_SHORT_SHA}}"
          insightAPIImage: "nlxio/insight-api:{{.CI_COMMIT_SHORT_SHA}}"
          inwayImage: "nlxio/inway:{{.CI_COMMIT_SHORT_SHA}}"
          managementAPIImage: "nlxio/management-api:{{.CI_COMMIT_SHORT_SHA}}"
          managementUIImage: "nlxio/management-ui:{{.CI_COMMIT_SHORT_SHA}}"
          nlxctlImage:  "nlxio/nlxctl:{{.CI_COMMIT_SHORT_SHA}}"
          txlogDBImage: "nlxio/txlog-db:{{.CI_COMMIT_SHORT_SHA}}"
          directoryRegistrationHostname: directory-registration-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          directoryInspectionHostname: directory-inspection-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          caAddress: ca-cfssl-unsafe.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          externalDomain: nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          domain: nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}
          irma.apiServerImage: "nlxio/irma:{{.CI_COMMIT_SHORT_SHA}}"
          configAPI.insightAPIURL: https://insight-api-nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          configAPI.irmaServerURL: https://irma-api-nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          configAPI.serviceConfig: |
            \{
              "name": "kentekenregister"\,
              "endpointURL": "http://service.nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}:8000"\,
              "apiSpecificationURL": "http://service.nlx-rdw-{{.CI_ENVIRONMENT_SLUG}}:8000/openapi.yaml"\,
              "authorizationSettings": \{
                "mode": "none"
              \}\,
              "inways": ["inway.rdw"]
            \}
- name: review-haarlem
  build:
    tagPolicy:
      envTemplate:
        template: "{{.IMAGE_NAME}}:{{.CI_COMMIT_SHORT_SHA}}"
  deploy:
    helm:
      releases:
      - name: "nlx-haarlem-{{.CI_ENVIRONMENT_SLUG}}"
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-review-haarlem.yaml
        setValueTemplates:
          authServiceImage: "nlxio/auth-service:{{.CI_COMMIT_SHORT_SHA}}"
          caCfsslUnsafeImage: "nlxio/ca-cfssl-unsafe:{{.CI_COMMIT_SHORT_SHA}}"
          configAPIImage: "nlxio/config-api:{{.CI_COMMIT_SHORT_SHA}}"
          insightAPIImage: "nlxio/insight-api:{{.CI_COMMIT_SHORT_SHA}}"
          inwayImage: "nlxio/inway:{{.CI_COMMIT_SHORT_SHA}}"
          managementAPIImage: "nlxio/management-api:{{.CI_COMMIT_SHORT_SHA}}"
          managementUIImage: "nlxio/management-ui:{{.CI_COMMIT_SHORT_SHA}}"
          nlxctlImage:  "nlxio/nlxctl:{{.CI_COMMIT_SHORT_SHA}}"
          outwayImage: "nlxio/outway:{{.CI_COMMIT_SHORT_SHA}}"
          txlogDBImage: "nlxio/txlog-db:{{.CI_COMMIT_SHORT_SHA}}"
          directoryRegistrationHostname: directory-registration-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          directoryInspectionHostname: directory-inspection-api.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          caAddress: ca-cfssl-unsafe.nlx-directory-{{.CI_ENVIRONMENT_SLUG}}
          externalDomain: nlx-haarlem-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}
          domain: nlx-haarlem-{{.CI_ENVIRONMENT_SLUG}}
          irma.apiServerImage: "nlxio/irma:{{.CI_COMMIT_SHORT_SHA}}"
          inway.config: |
            [services]
                [services.demo-api]
                endpoint-url = 'https://postman-echo.com'
                authorization-model = 'none'
                insight-api-url = 'https://insight-api-nlx-haarlem-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}'
                irma-api-url = 'https://irma-api-nlx-haarlem-{{.CI_ENVIRONMENT_SLUG}}.{{.REVIEW_BASE_DOMAIN}}'
                public-support-contact = "public-support@nlx.io"
                tech-support-contact = "tech-support@nlx.io"
- name: test
  build:
    tagPolicy:
      gitCommit: {}
  deploy:
    helm:
      releases:
      - name: nlx-test-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-test.yaml
        values:
          caCertportalImage: nlxio/ca-certportal
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
        namespace: nlx-test-directory
      - name: nlx-test-brp
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-test-brp.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-test-brp
      - name: nlx-test-rdw
        chartPath: helm/nlx-organization
        setValueTemplates:
         management.basicAuth: "{{.MANAGEMENT_BASIC_AUTH}}"
        valuesFiles:
        - helm/nlx-organization/values-test-rdw.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-test-rdw
      - name: nlx-test-haarlem
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-test-haarlem.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          outwayImage: nlxio/outway
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-test-haarlem
- name: acc
  build:
    tagPolicy:
      gitCommit: {}
  deploy:
    helm:
      releases:
      - name: nlx-acc-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-acc.yaml
        values:
          caCertportalImage: nlxio/ca-certportal
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
        namespace: nlx-acc-directory
      - name: nlx-acc-brp
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-acc-brp.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-acc-brp
      - name: nlx-acc-rdw
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-acc-rdw.yaml
        setValueTemplates:
         management.basicAuth: "{{.MANAGEMENT_BASIC_AUTH}}"
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-acc-rdw
      - name: nlx-acc-haarlem
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-acc-haarlem.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          outwayImage: nlxio/outway
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-acc-haarlem
- name: demo
  build:
    tagPolicy:
      gitCommit: {}
  deploy:
    helm:
      releases:
      - name: nlx-demo-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-demo.yaml
        values:
          caCertportalImage: nlxio/ca-certportal
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
        namespace: nlx-demo-directory
      - name: nlx-demo-brp
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-demo-brp.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-demo-brp
      - name: nlx-demo-rdw
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-demo-rdw.yaml
        setValueTemplates:
         management.basicAuth: "{{.MANAGEMENT_BASIC_AUTH}}"
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-demo-rdw
      - name: nlx-demo-haarlem
        chartPath: helm/nlx-organization
        valuesFiles:
        - helm/nlx-organization/values-demo-haarlem.yaml
        values:
          authServiceImage: nlxio/auth-service
          caCfsslUnsafeImage: nlxio/ca-cfssl-unsafe
          configAPIImage: nlxio/config-api
          insightAPIImage: nlxio/insight-api
          inwayImage: nlxio/inway
          outwayImage: nlxio/outway
          managementAPIImage: nlxio/management-api
          managementUIImage: nlxio/management-ui
          nlxctlImage: nlxio/nlxctl
          txlogDBImage: nlxio/txlog-db
        namespace: nlx-demo-haarlem
- name: preprod
  build:
    tagPolicy:
      gitCommit: {}
  deploy:
    helm:
      releases:
      - name: nlx-preprod-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-preprod.yaml
        values:
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
        namespace: nlx-preprod-directory
- name: prod
  build:
    tagPolicy:
      gitCommit: {}
  deploy:
    helm:
      releases:
      - name: nlx-prod-directory
        chartPath: helm/nlx-directory
        valuesFiles:
        - helm/nlx-directory/values-prod.yaml
        values:
          directoryDBImage: nlxio/directory-db
          directoryInspectionImage: nlxio/directory-inspection-api
          directoryMonitorImage: nlxio/directory-monitor
          directoryRegistrationImage: nlxio/directory-registration-api
          directoryUIImage: nlxio/directory-ui
          docsImage: nlxio/docs
          insightUIImage: nlxio/insight-ui
        namespace: nlx-prod-directory
